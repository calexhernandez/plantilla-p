
	
var dbConn;

try {
	dbConn = DatabaseConnectionFactory.createDatabaseConnection('com.microsoft.sqlserver.jdbc.SQLServerDriver',configurationMap.get('DB_HL7_JDBC'),configurationMap.get('DB_HL7_USER'),configurationMap.get('DB_HL7_PASSWORD'));
	var result = dbConn.executeCachedQuery("SELECT top 100 im_order_log.id AS id, im_order_log.center_id AS center_id, im_order_log.order_id AS order_id, im_order_log.patient_id AS patient_id, im_order_log.service_type_id AS service_type_id, im_order_log.order_status_id AS status_id,  im_order_log.trans_status_id AS trans_status_id FROM im_order_log WHERE im_order_log.trans_status_id = 0 ORDER BY im_order_log.id ASC");
	return result;
} finally {
	if (dbConn) { 
		dbConn.close();
	}
}




// This update script will be executed once for every result returned from the above query.
var dbConn;

try {
	dbConn = DatabaseConnectionFactory.createDatabaseConnection('com.microsoft.sqlserver.jdbc.SQLServerDriver',configurationMap.get('DB_HL7_JDBC'),configurationMap.get('DB_HL7_USER'),configurationMap.get('DB_HL7_PASSWORD'));
	
	var result = dbConn.executeUpdate("UPDATE im_order_log SET trans_status_id = 1 WHERE id = " + $('id'));
} finally {
	if (dbConn) { 
		dbConn.close();
	}
}
