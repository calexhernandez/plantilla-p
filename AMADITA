var rawUser = msg['MSH']['MSH.8']['MSH.8.1'].toString(); // Cambia el path segÃºn el campo exacto

var result = "";

if (rawUser.indexOf('.') !== -1) {
    var parts = rawUser.split('.');
    if (parts[0].length > 0 && parts[1].length > 0) {
        result = parts[0].charAt(0) + parts[1].charAt(0);
    }
} else {
    result = rawUser.substring(0, 2);
}

result = result.toUpperCase();
logger.info("Usuario procesado: " + result);
