var method = sourceMap.get('method');
//logger.info(method)
if( method == "POST"){
	logger.info('entraste metodo POST');


	//responseMap.put('Content-Type', 'application/json');
	var statusCode = "200";
	
	channelMap.put("statusCode", statusCode);
	//responseMap.put('message','authorized Method.');
	//responseMap.put("statusCode", statusCode);

	logger.info("estatusCode: " +$('statusCode'));
	
	return true;	
}

	var statusCode = "405";

	//responseMap.put('Content-Type', 'application/json')
	
	channelMap.put("statusCode", statusCode);
	//responseMap.put('error','Only post requests are allowed.')
	//responseMap.put("statusCode", statusCode);

logger.info("estatusCode: " +$('statusCode'));
return false;








********************
'


var headers = sourceMap.get('headers');
var apiKey = "Bearer 123456";
const authHeader = headers ? headers.get('Authorization'): null;

if(authHeader !== null){
	authHeader = String(authHeader).trim();
}

logger.info("authHeader" + authHeader);
logger.info("apiKey" + apiKey);

	if(authHeader == apiKey){

		var statusCode = "200";
	
		//responseMap.put('Content-Type', 'application/json')
		//responseMap.put("message","authorized request!");
		channelMap.put("statusCode", statusCode);
		
		//responseMap.put("statusCode", statusCode);

		logger.info("estatusCode: " +$('statusCode'));
		return true;
		
	}

	var statusCode = "403";
	//responseMap.put('Content-Type', 'application/json')
	//responseMap.put("error","Invalid token!");
	channelMap.put("statusCode", statusCode);
	
	//responseMap.put("statusCode", statusCode);

logger.info("estatusCode: " +$('statusCode'));
return false;


