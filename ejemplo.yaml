// ===============================
// Patient Information
// ===============================
var Cedula = msg['Cedula'];
var DateBirth = msg['DateBirth'];
var eMail = msg['eMail'];
var Employer = msg['Employer'];
var IdFamiliar = msg['IdFamiliar'];
var IdMedicalCore = msg['IdMedicalCore'];
var IdPrincipalNuevo = msg['IdPrincipalNuevo'];
var NumberRFC = msg['NumberRFC'];
var Patient1stLastName = msg['Patient1stLastName'];
var Patient2ndLastName = msg['Patient2ndLastName'];
var PatientName = msg['PatientName'];
var Relation = msg['Relation'];
var Sex = msg['Sex'];
var TelMovil = msg['TelMovil'];

// ===============================
// Account Details
// ===============================
var PhysicalAddress1 = msg['Account']['PhysicalAddress1'];
var PhysicalAddress2 = msg['Account']['PhysicalAddress2'];
var PhysicalCity = msg['Account']['PhysicalCity'];
var PhysicalCountry = msg['Account']['PhysicalCountry'];
var PhysicalState = msg['Account']['PhysicalState'];
var PhysicalZipCode = msg['Account']['PhysicalZipCode'];

var PostalAddress1 = msg['Account']['PostalAddress1'];
var PostalAddress2 = msg['Account']['PostalAddress2'];
var PostalCity = msg['Account']['PostalCity'];
var PostalCountry = msg['Account']['PostalCountry'];
var PostalState = msg['Account']['PostalState'];
var PostalZipCode = msg['Account']['PostalZipCode'];

// ===============================
// Billing Information
// ===============================
var Billing1stLastName = msg['Account']['Billing1stLastName'];
var Billing2ndLastName = msg['Account']['Billing2ndLastName'];
var BillingAddress1 = msg['Account']['BillingAddress1'];
var BillingAddress2 = msg['Account']['BillingAddress2'];
var BillingCity = msg['Account']['BillingCity'];
var BillingCountry = msg['Account']['BillingCountry'];
var BillingInitial = msg['Account']['BillingInitial'];
var BillingName = msg['Account']['BillingName'];
var BillingState = msg['Account']['BillingState'];
var BillingZipCode = msg['Account']['BillingZipCode'];
var TelBusiness = msg['Account']['TelBusiness'];
var TelHome = msg['Account']['TelHome'];

// ===============================
// Insurance Details
// ===============================
var DateExpedition = msg['PatientIns']['DateExpedition'];
var DateExpiration = msg['PatientIns']['DateExpiration'];
var InsCompanyNo = msg['PatientIns']['InsCompanyNo'];
var InsPolicyGroup = msg['PatientIns']['InsPolicyGroup'];
var InsPolicyNo = msg['PatientIns']['InsPolicyNo'];
var InsPolicyType = msg['PatientIns']['InsPolicyType'];

// ===============================
// Requisition Details
// ===============================
var AccountNumber = msg['RequisitionDetails']['AccountNumber'];
var AssignedPatientLocation = msg['RequisitionDetails']['AssignedPatientLocation'];
var Destination = msg['RequisitionDetails']['Destination'];
var Diagnosis = msg['RequisitionDetails']['Diagnosis'];
var Employeer = msg['RequisitionDetails']['Employeer'];
var IdService = msg['RequisitionDetails']['IdService'];
var LocationID = msg['RequisitionDetails']['LocationID'];
var PatientClass = msg['RequisitionDetails']['PatientClass'];
var PatientNumber = msg['RequisitionDetails']['PatientNumber'];
var RefDoctorName = msg['RequisitionDetails']['RefDoctorName'];
var RefDoctorNumber = msg['RequisitionDetails']['RefDoctorNumber'];
var RequisitionDate = msg['RequisitionDetails']['RequisitionDate'];
var RequisitionTime = msg['RequisitionDetails']['RequisitionTime'];
var Service = msg['RequisitionDetails']['Service'];
var ServicePlace = msg['RequisitionDetails']['ServicePlace'];
var ServiceReason = msg['RequisitionDetails']['ServiceReason'];
var ServiceType = msg['RequisitionDetails']['ServiceType'];

// ===============================
// ICD Codes
// ===============================
var ICDCode01 = msg['RequisitionDetails']['ICDCodes']['ICDCode01'];

// ===============================
// Procedure Details (Arrays)
// ===============================
var LineNumber = [];
var ProcNumber = [];
var QtyProcedures = [];
var InvoiceCodeINT = [];
var Amount = [];
var AmountIns = [];
var AmountPat = [];
var AdditionalCharge = [];
var Priority = [];

for (var i = 0; i < getArrayOrXmlLength(msg['RequisitionDetails']['Procedures']); i++) {
    LineNumber.push(msg['RequisitionDetails']['Procedures'][i]['LineNumber']);
    ProcNumber.push(msg['RequisitionDetails']['Procedures'][i]['ProcNumber']);
    QtyProcedures.push(msg['RequisitionDetails']['Procedures'][i]['QtyProcedures']);
    InvoiceCodeINT.push(msg['RequisitionDetails']['Procedures'][i]['InvoiceCodeINT']);
    Amount.push(msg['RequisitionDetails']['Procedures'][i]['Amount']);
    AmountIns.push(msg['RequisitionDetails']['Procedures'][i]['AmountIns']);
    AmountPat.push(msg['RequisitionDetails']['Procedures'][i]['AmountPat']);
    AdditionalCharge.push(msg['RequisitionDetails']['Procedures'][i]['AdditionalCharge']);
    Priority.push(msg['RequisitionDetails']['Procedures'][i]['Priority']);

    logger.info("Index: " + i + " | ProcNum: " + msg['RequisitionDetails']['Procedures'][i]['ProcNumber']);
}

// ===============================
// Store Values in channelMap
// ===============================

// Patient
channelMap.put("Cedula", Cedula);
channelMap.put("DateBirth", DateBirth);
channelMap.put("eMail", eMail);
channelMap.put("Employer", Employer);
channelMap.put("IdFamiliar", IdFamiliar);
channelMap.put("IdMedicalCore", IdMedicalCore);
channelMap.put("IdPrincipalNuevo", IdPrincipalNuevo);
channelMap.put("NumberRFC", NumberRFC);
channelMap.put("Patient1stLastName", Patient1stLastName);
channelMap.put("Patient2ndLastName", Patient2ndLastName);
channelMap.put("PatientName", PatientName);
channelMap.put("Relation", Relation);
channelMap.put("Sex", Sex);
channelMap.put("TelMovil", TelMovil);

// Account
channelMap.put("PhysicalAddress1", PhysicalAddress1);
channelMap.put("PhysicalAddress2", PhysicalAddress2);
channelMap.put("PhysicalCity", PhysicalCity);
channelMap.put("PhysicalCountry", PhysicalCountry);
channelMap.put("PhysicalState", PhysicalState);
channelMap.put("PhysicalZipCode", PhysicalZipCode);
channelMap.put("PostalAddress1", PostalAddress1);
channelMap.put("PostalAddress2", PostalAddress2);
channelMap.put("PostalCity", PostalCity);
channelMap.put("PostalCountry", PostalCountry);
channelMap.put("PostalState", PostalState);
channelMap.put("PostalZipCode", PostalZipCode);

// Billing
channelMap.put("Billing1stLastName", Billing1stLastName);
channelMap.put("Billing2ndLastName", Billing2ndLastName);
channelMap.put("BillingAddress1", BillingAddress1);
channelMap.put("BillingAddress2", BillingAddress2);
channelMap.put("BillingCity", BillingCity);
channelMap.put("BillingCountry", BillingCountry);
channelMap.put("BillingInitial", BillingInitial);
channelMap.put("BillingName", BillingName);
channelMap.put("BillingState", BillingState);
channelMap.put("BillingZipCode", BillingZipCode);
channelMap.put("TelBusiness", TelBusiness);
channelMap.put("TelHome", TelHome);

// Insurance
channelMap.put("DateExpedition", DateExpedition);
channelMap.put("DateExpiration", DateExpiration);
channelMap.put("InsCompanyNo", InsCompanyNo);
channelMap.put("InsPolicyGroup", InsPolicyGroup);
channelMap.put("InsPolicyNo", InsPolicyNo);
channelMap.put("InsPolicyType", InsPolicyType);

// Requisition
channelMap.put("AccountNumber", AccountNumber);
channelMap.put("AssignedPatientLocation", AssignedPatientLocation);
channelMap.put("Destination", Destination);
channelMap.put("Diagnosis", Diagnosis);
channelMap.put("Employeer", Employeer);
channelMap.put("IdService", IdService);
channelMap.put("LocationID", LocationID);
channelMap.put("PatientClass", PatientClass);
channelMap.put("PatientNumber", PatientNumber);
channelMap.put("RefDoctorName", RefDoctorName);
channelMap.put("RefDoctorNumber", RefDoctorNumber);
channelMap.put("RequisitionDate", RequisitionDate);
channelMap.put("RequisitionTime", RequisitionTime);
channelMap.put("Service", Service);
channelMap.put("ServicePlace", ServicePlace);
channelMap.put("ServiceReason", ServiceReason);
channelMap.put("ServiceType", ServiceType);

// ICD Code
channelMap.put("ICDCode01", ICDCode01);

// Procedures
channelMap.put("LineNumber", LineNumber);
channelMap.put("ProcNumber", ProcNumber);
channelMap.put("QtyProcedures", QtyProcedures);
channelMap.put("InvoiceCodeINT", InvoiceCodeINT);
channelMap.put("Amount", Amount);
channelMap.put("AmountIns", AmountIns);
channelMap.put("AmountPat", AmountPat);
channelMap.put("AdditionalCharge", AdditionalCharge);
channelMap.put("Priority", Priority);
